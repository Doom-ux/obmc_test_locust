# obmc_test_locust
Разработка сценария нагрузочного тестирования с использованием Locust

## Перечисление автотестов
В набор входят следующие классы нагрузки:
1) Тестирование OpenBMC API:
    - Получение информации о системе (/redfish/v1/Systems/system).
    - Запрос состояния питания.
2) Тестирование публичного API:
    - Запрос списка постов на JSONPlaceholder (/posts).
    - Запрос погоды на wttr.in (https://wttr.in/Novosibirsk?format=j1).

## Результат тестирования

### Запуск нагрузочного тестирования
1. Для запуска locust с включением в набор задач определенных тестов можно воспользоваться следующей командой:
   ```
   locust -f <filename>
   ```

2. Затем необходимо перейти в веб-интерфейс по адресу: http://localhost:8089, указать количество пользователей и скорость их запуска.

### Тестирование OpenBMC API
1. Запуск нескольких тестовых итераций, чтобы определить нагрузку, при которой начинают появляться ошибки.
   
   ![obmc_100_50_saturation](https://github.com/Doom-ux/obmc_test_locust/blob/media/openBmc_60_30_80_40_80_60_100_50.png)

   Описание параметров итераций:
    - Run #1: количество пользователей равно 60, скорость их запуска 30 пользователей/сек.
    - Run #2: количество пользователей равно 80, скорость их запуска 40 пользователей/сек.
    - Run #3: количество пользователей равно 80, скорость их запуска 60 пользователей/сек.
    - Run #4: количество пользователей равно 100, скорость их запуска 50 пользователей/сек.
   
   <p>Исходя из результатов итераций, видно, что работа без ошибок возможна при нагрузке - 60 пользователей.</p>
   <br>

2. Также стоит рассмотреть график с временем ответа платформы на запросы.

   ![obmc_100_50_resptime](https://github.com/Doom-ux/obmc_test_locust/blob/media/openBmc_60_30_80_40_80_60_100_50_resptime.png)

   <p>Как видно на графике, задержка между событием отправления запроса и событием получения ответа во всех итерациях 
      состовляет от 10 секунд и более. Подобная задержка может вызвать у пользователя ощущение, что система зависла, 
      поэтому нагрузку в 60 пользователей трудно назвать стабильной или удобоваримой.</p>
   <br>

3. Запуск тестовых итераций с количеством пользователей меньше 70.
   <div>
       <img src='https://github.com/Doom-ux/obmc_test_locust/blob/media/openBmc_10_5_20_10_40_20_60_30.png' alt='obmc_10_5'>
       <p align='center'>(график скорости обработки запросов obmc)</p>
   </div>
   <br>

   <div>
       <img src='https://github.com/Doom-ux/obmc_test_locust/blob/media/openBmc_10_5_20_10_40_20_60_30_resptime.png' alt='obmc_10_5_resptime'>
       <p align='center'>(график времени задержки ответа на запрос obmc)</p>
   </div>

      Описание параметров итераций:
    - Run #1: количество пользователей равно 10, скорость их запуска 5 пользователей/сек.
    - Run #2: количество пользователей равно 20, скорость их запуска 10 пользователей/сек.
    - Run #3: количество пользователей равно 40, скорость их запуска 20 пользователей/сек.
    - Run #4: количество пользователей равно 60, скорость их запуска 30 пользователей/сек.
   
   <p>Исходя из результатов итераций, видно, что наиболее стабильная работа наблюдается при количестве пользователей равном или меньше 10.</p>
   <br>
   

4. Статистическая таблица тестовой итерации с количеством пользователей равным 10.

   ![obmc_10_5_saturation](https://github.com/Doom-ux/obmc_test_locust/blob/media/openBmc_10_5_20_10_40_20_60_30_statistics.png)

   <p><b>Процент ошибок</b> по соотношению значения ошибочных запросов с общим количеством запросов состовляет: 0%.</p>
   <p><b>Среднее время</b> отклика API по таблице равно: 0.654 сек.</p>
   <br>
   
### Тестирование wttr.in API

1. Запуск нагрузочного тестирования для серивиса прогноза погоды wttr.in с количеством пользователей - 100.
   
   <div>
       <img src='https://github.com/Doom-ux/obmc_test_locust/blob/media/wttrin_100_50.png' alt='wttr.in_100_50_saturation'>
       <p align='center'>(график скорости обработки запросов wttr.in)</p>
   </div>
   <br>
   
   <div>
       <img src='https://github.com/Doom-ux/obmc_test_locust/blob/media/wttrin_100_50_resptime.png' alt='wttr.in_100_50_resptime'>
       <p align='center'>(график времени задержки ответа на запрос wttr.in)</p>
   </div>
   <br>
   
2. Статистическая таблица тестовой итерации для wttr.in.
   
   ![wttr.in_100_50_statistics](https://github.com/Doom-ux/obmc_test_locust/blob/media/wttrin_100_50_statistics.png)

   <p><b>Процент ошибок</b> по соотношению значения ошибочных запросов с общим количеством запросов состовляет: 0%.</p>
   <p><b>Среднее время</b> отклика API по таблице равно: 1.604 сек.</p>
   <br>

### Тестирование JSONPlaceholder API

1. Запуск нагрузочного тестирования для ресурса JSONPlaceholder c количеством пользователей - 100.
   
   <div>
       <img src='https://github.com/Doom-ux/obmc_test_locust/blob/media/jsonplaceholder_100_50.png' alt='jsonplaceholder_100_50_saturation'>
       <p align='center'>(график скорости обработки запросов jsonplaceholder)</p>
   </div>
   <br>
   
   <div>
       <img src='https://github.com/Doom-ux/obmc_test_locust/blob/media/jsonplaceholder_100_50_resptime.png' alt='jsonplaceholder_100_50_resptime'>
       <p align='center'>(график времени задержки ответа на запрос jsonplaceholder)</p>
   </div>
   <br>
   
2. Статистическая таблица тестовой итерации для JSONPlaceholder.
   
   ![jsonplaceholder_100_50_statistics](https://github.com/Doom-ux/obmc_test_locust/blob/media/jsonplaceholder_100_50_statistics.png)

   <p><b>Процент ошибок</b> по соотношению значения ошибочных запросов с общим количеством запросов состовляет: 0%.</p>
   <p><b>Среднее время</b> отклика API по таблице равно: 0.162 сек.</p>
   <br>

## Структура каталогов

```
obmc_test_locust/
    tests/
        locustfile.py
        locustfile2.py
    README.md
```
